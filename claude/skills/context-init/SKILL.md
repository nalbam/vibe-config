---
name: context-init
description: Initialize project context by reading docs and saving to ./.context.md. 프로젝트 문서 분석 후 컨텍스트 저장.
allowed-tools: Read, Write, Bash, Grep, Glob, Task
---

# Context Initialize

**IMPORTANT: 모든 설명과 요약은 한국어로 작성하세요. 단, 코드 예시와 명령어는 원문 그대로 유지합니다.**

프로젝트 문서를 분석하고 컨텍스트를 `./.context.md`에 저장합니다.

## Philosophy

- **표면이 아닌 본질을 파악한다** — 파일 목록이 아니라, 프로젝트가 어떻게 동작하는지 이해한다
- **코드를 직접 읽고 확인한다** — README만 믿지 않고, 실제 코드와 대조한다
- **AI가 효과적으로 작업할 수 있는 맥락을 제공한다** — 핵심 패턴, 함정, 관례를 기록한다

## Workflow

### 1. Check Existing Context
```bash
# Check if context already exists
ls -la ./.context.md 2>/dev/null
```

If exists, ask user whether to overwrite or skip.

### 2. Analyze Project Structure
```bash
# List root directory
ls -la

# Find key configuration files
ls -la package.json pyproject.toml go.mod Cargo.toml 2>/dev/null

# List directories
ls -d */ 2>/dev/null
```

### 3. Read Key Documents

**Priority order:**
1. `README.md` - Project overview
2. `CLAUDE.md` - AI instructions (if exists)
3. `package.json` / `pyproject.toml` / `go.mod` - Dependencies
4. `docs/` directory contents
5. `src/` or main source directory structure
6. Configuration files (tsconfig.json, .eslintrc, etc.)

**Use Task tool with Explore agent for large codebases:**
```
Explore the codebase structure and identify:
- Main entry points and how they connect
- Key modules, their purposes, and their dependencies
- Coding patterns and conventions (actually used, not just documented)
- Data flow: how data enters, transforms, and exits the system
- Test structure and coverage patterns
- Gotchas: non-obvious behavior, workarounds, technical debt
```

**CRITICAL: README/docs와 실제 코드를 대조한다.**
- README에 적힌 명령어가 실제로 동작하는가?
- 문서화된 아키텍처가 코드와 일치하는가?
- 불일치가 있으면 코드를 기준으로 기록하고, 불일치를 Notes에 기재한다.

### 4. Gather Information

Collect the following:

| Section | Content |
|---------|---------|
| **Overview** | Project name, purpose, description |
| **Tech Stack** | Languages, frameworks, key dependencies |
| **Structure** | Directory layout with descriptions |
| **Entry Points** | Main files, CLI commands, API endpoints |
| **Patterns** | Coding conventions, architectural patterns |
| **Commands** | Build, test, lint, run commands |
| **Configuration** | Key config files and their purposes |

### 5. Create Context File

Create `./context.md` with the following structure:

```markdown
# Project Context

> Auto-generated by /context-init
> Last updated: YYYY-MM-DD

## Overview

[Project name and brief description]

## Tech Stack

| Category | Technology |
|----------|------------|
| Language | ... |
| Framework | ... |
| Database | ... |
| Testing | ... |

## Directory Structure

```
project/
├── src/           # Source code
├── tests/         # Test files
├── docs/          # Documentation
└── ...
```

## Key Files

| File | Purpose |
|------|---------|
| `src/index.ts` | Main entry point |
| ... | ... |

## Commands

```bash
# Install dependencies
npm install

# Run development server
npm run dev

# Run tests
npm test

# Build for production
npm run build
```

## Architecture

[Brief description of architecture, data flow, key patterns]

## Coding Conventions

- [Convention 1]
- [Convention 2]
- ...

## Notes

[Any important notes, gotchas, or context for AI assistants]
```

### 6. Ensure docs Directory Exists
```bash
mkdir -p ./docs
```

### 7. Save Context File
Write the gathered information to `./context.md`.

### 8. Verify and Report
```bash
# Verify file was created
ls -la ./context.md

# Show file size
wc -l ./context.md
```

Report summary:
```
## Context Initialized

- File: ./context.md
- Size: X lines
- Sections: Overview, Tech Stack, Structure, Commands, Architecture

Use `/context-load` to load this context in a new session.
```

## Rules

- Read files completely before summarizing
- Focus on information useful for AI assistants
- Include concrete examples (commands, file paths)
- Keep summaries concise but comprehensive
- Do NOT include sensitive information (secrets, credentials)
- Do NOT include generated/build files in structure

## Anti-Patterns

- Do NOT just copy entire files
- Do NOT include node_modules, dist, build directories
- Do NOT store secrets or environment-specific values
- Do NOT make the context file too long (aim for < 500 lines)
